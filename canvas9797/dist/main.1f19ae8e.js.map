{"version":3,"sources":["main.js"],"names":["draw","isTouchDevice","document","documentElement","features","querySelector","pencil","rubber","clean","download","colors","lineStyle","painting","last","ctx","undefined","canvas","featuresMap","currentFeature","colorMap","currentColor","lineStyleMap","big","normal","small","currentLineStyle","onRubber","viewportWidth","clientWidth","viewportHeight","clientHeight","init","initStyle","getElementById","getContext","width","height","initCanvas","bindTouchEvents","bindMouseEvents","bindFeatureEvents","bindColorEvents","bindLineStyleEvents","fillStyle","strokeStyle","lineWidth","lineCap","initFeatureStyle","featuresChildren","children","i","length","id","classList","add","remove","initColorStyle","colorsChildren","initLineStyle","lineStyleChildren","drawLine","x1","y1","x2","y2","beginPath","moveTo","lineTo","stroke","onmousedown","e","onMouseDown","onmouseup","onmousemove","onMouseMove","ontouchstart","onTouchStart","addEventListener","preventDefault","onTouchMove","passive","onclick","currentTarget","clearRect","save","globalCompositeOperation","fillRect","MIME_TYPE","imgURL","toDataURL","dlLink","createElement","href","dataset","downloadurl","join","body","appendChild","click","removeChild","indexOf","target","Object","keys","getCurrentTouchXY","touches","clientX","clientY","x","y"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..","sourcesContent":["const draw = {\n    //检测当前屏幕是否支持触摸\n    isTouchDevice: \"ontouchstart\" in document.documentElement,\n    features: document.querySelector('#features'),\n    pencil: document.querySelector('#pencil'),\n    rubber: document.querySelector('#rubber'),\n    clean: document.querySelector('#clean'),\n    download: document.querySelector('#download'),\n    colors: document.querySelector('#colors'),\n    lineStyle: document.querySelector('#line-style'),\n    //设置鼠标按钮的开关\n    painting: false,\n    //储存上一次的坐标\n    last: [],\n    //储存canvas展示的区域\n    ctx: undefined,\n    //获取canvas的DOM节点\n    canvas: undefined,\n    //默认的功能,颜色,笔迹\n    featuresMap: ['pencil', 'rubber'],\n    currentFeature: 'pencil',\n\n    colorMap: ['black', 'red', 'yellow', 'green', 'blue'],\n    currentColor: 'black',\n\n    lineStyleMap: { big: 10, normal: 6, small: 2 },\n    currentLineStyle: 'big',\n    //橡皮擦功能是否开启\n    onRubber: false,\n    //储存当前viewport宽高\n    viewportWidth: document.documentElement.clientWidth,\n    viewportHeight: document.documentElement.clientHeight,\n    init: () => {\n        draw.initStyle()\n            //获取画板的节点\n        draw.canvas = document.getElementById(\"canvas\");\n        //获取canvas的content,图像将在这里被渲染\n        draw.ctx = draw.canvas.getContext(\"2d\");\n        //将canvas的宽高设置为屏幕宽高\n        draw.canvas.width = draw.viewportWidth\n        draw.canvas.height = draw.viewportHeight\n            //初始化canvas画笔\n        draw.initCanvas()\n            //触摸画线或者鼠标画线\n        draw.isTouchDevice ? draw.bindTouchEvents() : draw.bindMouseEvents()\n        draw.bindFeatureEvents()\n        draw.bindColorEvents()\n        draw.bindLineStyleEvents()\n    },\n    initCanvas: () => {\n        //填充颜色\n        draw.ctx.fillStyle = draw.currentColor;\n        //边框\n        draw.ctx.strokeStyle = draw.currentColor;\n        //线宽\n        draw.ctx.lineWidth = draw.lineStyleMap[draw.currentLineStyle];\n        //设置转折圆角\n        draw.ctx.lineCap = \"round\";\n    },\n    initFeatureStyle: () => {\n        const featuresChildren = draw.features.children\n        for (let i = 0; i < featuresChildren.length; i++) {\n            if (featuresChildren[i].id === draw.currentFeature) {\n                featuresChildren[i].classList.add('active')\n            } else {\n                featuresChildren[i].classList.remove('active')\n            }\n        }\n    },\n    initColorStyle: () => {\n        const colorsChildren = draw.colors.children\n        for (let i = 0; i < colorsChildren.length; i++) {\n            if (colorsChildren[i].id === draw.currentColor) {\n                colorsChildren[i].classList.add('active')\n            } else {\n                colorsChildren[i].classList.remove('active')\n            }\n        }\n    },\n    initLineStyle: () => {\n        const lineStyleChildren = draw.lineStyle.children\n        for (let i = 0; i < lineStyleChildren.length; i++) {\n            if (lineStyleChildren[i].id === draw.currentLineStyle) {\n                lineStyleChildren[i].classList.add('active')\n            } else {\n                lineStyleChildren[i].classList.remove('active')\n            }\n        }\n    },\n    initStyle: () => {\n        //初始化Features的样式\n        draw.initFeatureStyle()\n            //初始化画笔的颜色的样式\n        draw.initColorStyle()\n            //初始化线宽的样式\n        draw.initLineStyle()\n    },\n    drawLine: (x1, y1, x2, y2) => {\n        draw.ctx.beginPath();\n        draw.ctx.moveTo(x1, y1);\n        draw.ctx.lineTo(x2, y2);\n        draw.ctx.stroke();\n    },\n    bindMouseEvents: () => {\n        //检测鼠标按下事件\n        draw.canvas.onmousedown = (e) => {\n                draw.onMouseDown(e)\n            }\n            //检测鼠标弹起事件\n        draw.canvas.onmouseup = () => {\n                draw.painting = false;\n            }\n            //鼠标移动时检测鼠标是否按下,如果按下就开始画图\n        draw.canvas.onmousemove = (e) => {\n            draw.onMouseMove(e)\n        }\n    },\n    bindTouchEvents: () => {\n        //获取当前触摸开始的坐标\n        draw.canvas.ontouchstart = (e) => {\n            draw.onTouchStart(e)\n        };\n        //获取当前的坐标,并将开始坐标和当前坐标之间画线,将当前坐标赋值到上次坐标\n        draw.canvas.addEventListener('touchmove', (e) => {\n            //阻止iOS页面滑动\n            e.preventDefault()\n            draw.onTouchMove(e)\n        }, { passive: false })\n    },\n    bindFeatureEvents: () => {\n        draw.pencil.onclick = (e) => {\n            draw.currentFeature = e.currentTarget.id\n            draw.initFeatureStyle()\n                //关闭橡皮擦\n            draw.onRubber = false\n        }\n        draw.rubber.onclick = (e) => {\n            draw.currentFeature = e.currentTarget.id\n            draw.initFeatureStyle()\n                //开启橡皮擦\n            draw.onRubber = true\n        }\n        draw.clean.onclick = () => {\n            //增加清除功能\n            draw.ctx.clearRect(0, 0, draw.canvas.width, draw.canvas.height);\n        }\n        draw.download.onclick = () => {\n            //增加背景颜色\n            draw.ctx.save();\n            draw.ctx.globalCompositeOperation = 'destination-over';\n            draw.ctx.fillStyle = \"#FAF9DE\";\n            draw.ctx.fillRect(0, 0, draw.viewportWidth, draw.viewportHeight);\n            //增加下载功能\n            const MIME_TYPE = \"image/png\";\n            const imgURL = draw.canvas.toDataURL(\"image/png\");\n            const dlLink = document.createElement('a');\n            dlLink.download = '我的canvas画板';\n            dlLink.href = imgURL;\n            dlLink.dataset.downloadurl = [MIME_TYPE, dlLink.download, dlLink.href].join(':');\n            document.body.appendChild(dlLink);\n            dlLink.click();\n            document.body.removeChild(dlLink);\n        }\n\n    },\n    bindColorEvents: () => {\n        draw.colors.onclick = (e) => {\n            if (draw.colorMap.indexOf(e.target.id) >= 0) {\n                draw.currentColor = e.target.id\n                draw.initColorStyle()\n                draw.initCanvas()\n            }\n        }\n    },\n    bindLineStyleEvents: () => {\n        draw.lineStyle.onclick = (e) => {\n            if (Object.keys(draw.lineStyleMap).indexOf(e.target.id) >= 0) {\n                draw.currentLineStyle = e.target.id\n                draw.initLineStyle()\n                draw.initCanvas()\n            }\n        }\n    },\n    getCurrentTouchXY: (e) => {\n        return [e.touches[0].clientX, e.touches[0].clientY]\n    },\n    onTouchStart: (e) => {\n        draw.last = draw.getCurrentTouchXY(e);\n    },\n    onTouchMove: (e) => {\n        const [x, y] = draw.getCurrentTouchXY(e)\n        if (draw.onRubber) {\n            draw.ctx.clearRect(draw.last[0] - 5, draw.last[1] - 5, 20, 20)\n        } else {\n            draw.drawLine(draw.last[0], draw.last[1], x, y);\n        }\n        draw.last = [x, y];\n    },\n    onMouseDown: (e) => {\n        draw.painting = true;\n        draw.last = [e.clientX, e.clientY];\n    },\n    onMouseMove: (e) => {\n        if (draw.painting === true) {\n            if (draw.onRubber) {\n                draw.ctx.clearRect(draw.last[0] - 5, draw.last[1] - 5, 20, 20)\n            } else {\n                draw.drawLine(draw.last[0], draw.last[1], e.clientX, e.clientY);\n            }\n            draw.last = [e.clientX, e.clientY];\n        }\n    },\n}\n\ndraw.init()"]}