# 第四次会议

> 2022/08/21

- 答辩
  
  - 腾讯会议号：704-505-7275
  
  - 每小组答辩时间（汇报+提问）为12分钟，其中汇报时间不超过8分钟
  
  - 预计答辩时间：14: 06 - 14: 18
    
    - 13.30 进会议

## 展示文档（讨论）

- 实际演示
  
  - 按照作业文档，演示基础功能与额外完成的功能

- 概述
  
  - 需求分析（基础功能点），实际完成情况（包括额外完成的功能）
  - 画两张图（可以用[Xmind思维导图 | Xmind中文官方网站](https://www.xmind.cn/)）
  - 一个表（对不同语言的功能支持表格）

- 项目架构
  
  - 首先是一张图，描述项目的（拓扑）结构
    
    - 整体上分为4部分，前端、后端、数据库，Docker
    - 画出来每部分的具体结构与部分时间的联系
      - 前端中心为vue-cli，向左是element-ui，再向左连出一个箭头表示向用户提供服务
      - 前端中心为vue-cli，向右是xterm.js，monaco editor，从vue-cli向右连出一个箭头（上面写HTTP）直接指向后端（Flask），从xterm.js（上面写SocketIO）指向后端（Flask-SocketIO）... ...
      - 后端中心为Flask，向左是Flask-SocketIO，向右是Docker Python SDK, sqlite ... ...
    - 答辩时对着这张图讲整体架构
      - 如果图太大可以分成几页PPT，第一页是整体，之后每一页是一个局部放大，最后又是整体
  
  - 然后讲架构的重点
    
    - 使用Docker创建虚拟环境，每个工程拥有独立的Docker Container
      
      - 用户创建工程时可以选择一个环境（比如Python 3.8，GCC 8.3.0），服务器从对应的镜像（Image）开始创建一个Container，在数据库中记录Container ID，之后用户访问工程只需要启动Container即可
      
      - 好处
        
        - 工程之间环境独立，便于管理依赖：每个工程创建时都只有最基础的环境，不同工程之间不会互相干扰
        
        - 所有工程放在非特权模式的Container中，更加安全，防止服务器被用户的恶意代码攻击
        
        - 不同工程之间共享Image，对服务器内存占用少
        
        - 方便生命周期管理，用户离开IDE直接关闭Container，Container中的所有线程都被销毁（包括远程连接的终端、调试进程、语言服务）
    
    - 使用SocketIO（WebSocket）替代HTTP协议完成实时性较强的通信
      
      - 终端，调试器，语言服务等实时性很强，flask提供的Http协议的连接速度不够快。项目中改用SocketIO，一个基于WebSocket协议的库降低传输延时。
      
      - WebSocket协议是W3C 在 HTML5 中提供了一种技术... ...（稍微讲一下WebSocket的原理，它为什么这么快，简单的说就是“握手”用HTTP，成功后升级为WebSocket，然后直接用TCP传输数据，是应用层的TCP）
      
      - SocketIO是WebSocket的封装，支持事件驱动的双向通信，并可以通过namespace模块化组织代码
    
    - 使用LSP标准，对接语言服务器
      
      - LSP是由微软推动的一个开源协议，用于IDE与语言服务器之间通信
      
      - 只要正确配置LSP的JsonRPC接口，把支持LSP的编辑器与支持LSP的语言服务连接起来，就可以为代码编辑器添加动态代码补全等功能
    
    - 后端待补充（比如：与进程通信的`Popen`与`pexpect`）

- 工程管理
  
  - 使用Github (Teams) 管理代码，分成3个（4个，还有一个部署，如果部署写不完了就3个）仓库：前端、后端、文档
  - 过程文档 
    - 5次会议的会议记录
    - API文档与数据结构文档
  - 测试与持续集成
    - 使用Github Actions
    - 提交时：检查代码风格，自动运行测试
  - 开发服务器
    - 配置开发服务器，所有组员均可以连接到服务器
    - 避免运行环境不一致
  - 成果：commit曲线
    - 较为平稳，没有出现后期扎堆的情况（应该没有扎堆吧(；′⌒`)）
    - commit曲线

- 分工（讨论）
  
  - `git shortlog -s`
  
  - 每个人做了什么
    
    - 按照模块分，参考之前的会议文档与commit记录
    - 前端：hjx
      - 工程管理页面的原型设计：zrq
      - 登录/注册界面
      - 工程管理页面
      - IDE页面
        - 文件管理
        - 代码编辑器
          - 代码编辑
          - 对接语言服务
        - 终端
        - 调试/运行
          - 调试器界面：zrq
          - 调试/运行对接后端
        - 依赖管理
    - 后端
      - 登录：djk
      - 数据库：xhb
      - Docker交互
        - Container 交互/管理：xhb
        - 文件管理：xhb
        - 依赖项管理：djk
      - 终端：xhb
      - 语言服务器：hjx
      - 调试：xhb
      - 运行：xhb
      - 测试：djk
    - 文档
      - 会议：hjx
      - API文档：xhb, djk
    - 工程管理：hjx

附：对不同语言的功能支持表格

|                                | 编译/运行环境 | 语法高亮 | 动态代码补全 | 运行  | 调试  | 依赖管理 |
| ------------------------------ | ------- | ---- | ------ | --- | --- | ---- |
| Python                         | √       | √    | √      | √   | √   | √    |
| C / C++                        | √       | √    | √      | √   |     |      |
| Node.js                        | √       | √    | √      | √   |     | √    |
| 常见文本文件（Json, Dockerfile, yml等） |         | √    | √      |     |     |      |

### 答辩工作

- 讲稿：
  
  - 完善内容，做成可以直接念的讲稿
  - 按照5分钟来写
  - 先xhb，后hjx
  - xhb：22日睡觉之前，hjx：23日中午12点之前

- 做图：讲稿中提到的
  
  - 需求分析（基础功能点）
  
  - 实际完成情况
  
  - 项目的（拓扑）结构
  
  - commit曲线
  
  - hjx：22日之前

- PPT
  
  - 找几个好看的模板，可以在群里投一下票：22日之前
  
  - 按照讲稿，放图，放提要：23日睡觉之前
  
  - djk

- 演示视频
  
  - hjx：23日中午12点之前

- 谁来讲？
  
  - djk：23日睡觉之前
- 剪辑：xhb
  - 没有DDL
